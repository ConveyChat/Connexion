<!DOCTYPE html>

<html>
  <head>
    <title>Message</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <section class="hero is-metamask-orange">
      <div class="hero-body">
        <div class="container">
          <h1 class="title">
            You have a message!
          </h1>
          <h2 class="subtitle"></h2>
        </div>
      </div>
    </section>
    <br />
    <div class="container">
      <article class="message has-background-white-bis"></article>
    </div>
  </body>

  <script>
    window.onload = async () => {
      const urlParams = new URLSearchParams(window.location.search);
      const hash = urlParams.get('hash');

      fetch(`http://localhost:3000/getfile/${hash}`)
        .then(response => response.json())
        .then(data => {
          console.log(data);
          const messageArticle = document.querySelector('article.message');

          messageArticle.innerHTML = `<div class="message-header">
          <p><strong>From: </strong>${data.sender}</p>
          </div>
          <div class="message-body">
            ${data.body}
          </div>`;
        });
    };
  </script>
</html>
